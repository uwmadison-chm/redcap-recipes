"Variable / Field Name","Form Name","Section Header","Field Type","Field Label","Choices, Calculations, OR Slider Labels","Field Note","Text Validation Type OR Show Slider Number","Text Validation Min","Text Validation Max",Identifier?,"Branching Logic (Show field only if...)","Required Field?","Custom Alignment","Question Number (surveys only)","Matrix Group Name","Matrix Ranking?","Field Annotation"
record_id,demo,,text,"Record ID",,,,,,,,,,,,,
demo_desc,demo,,descriptive,"<div class=""rich-text-field-label""><p>This project shows a strategy to account for time zones in REDCap. The basic strategy is to <em>set a field with a baseline timestamp and base all other calculations off that.</em> Note that this strategy does not account for DST changes. I haven't figured a decent way to do that, other than generating timestamps offline. As of 2026, this will affect Arizona and Hawaii.</p> <p>Generally, REDCap times are in <em>server-local</em> time. Our server is in America/Chicago, so all of our timezone offsets will be relative to that. Eastern time will have a -60 minute offset; Pacific time will have a +120 minute offset. If your server timezone is different, you'll use different numbers.</p> <p>Again, we aren't breaking Arizona out separately because we can't do DST adjustments.</p> <p>We can guess at the timezone offset by using datediff() between @NOW and @NOW-SERVER. Remember to set those as @DEFAULT fields rather than using 'now' in a datediff() calculation directly.</p> <p>With that, you can use @CALCDATE and a date field to set a datetime to set a baseline time field, and calculate other dates relative to that.</p> <p>In this example, all calculated fields are visible on the survey; in a real project you would likely use @HIDDEN-SURVEY.</p></div>",,,,,,,,,,,,,
today_server,demo,,text,@TODAY-SERVER,,,date_ymd,,,,,,,,,," @TODAY-SERVER"
now_server,demo,,text,@NOW-SERVER,,,datetime_seconds_ymd,,,,,,,,,," @NOW-SERVER"
now,demo,,text,@NOW,,,datetime_seconds_ymd,,,,,,,,,," @NOW"
calc_tz_offset_min,demo,,calc,"calculated TZ offset (min): datediff([now], [now_server], 'm', true)","round(datediff([now], [now_server], 'm', true), 0)",,,,,,,,,,,,
demo_desc_2,demo," ",descriptive,"<div class=""rich-text-field-label""><p>This is in a different section so that the date difference will have been saved and we can use as the @DEFAULT for our time zone field...</p></div>",,,,,,,,,,,,,
tz_offset_min,demo,,radio,"Time zone","-60, Eastern | 0, Central | 60, Mountain | 120, Pacific | 180, Alaska | 240, Hawaii | 300, Samoa | 660, Chamorro",,,,,,,y,,,,," @DEFAULT='[calc_tz_offset_min]'"
baseline_timestamp,demo,,text,"Baseline timestamp: @CALCDATE([today_server], 1440 + [tz_offset_min], 'm')",,"1440 minutes = 24 hours",datetime_ymd,,,,,,,,,," @CALCDATE([today_server], 1440 + [tz_offset_min], 'm')"
days_to_t2,demo,,text,"Days to T2 Invitation",,,integer,,,,,,,,,," @DEFAULT='7'"
survey_min_from_midnight,demo,,text,"Survey Invitation Minutes from Midnight",,"Example: Noon: 12 * 60 = 720 ",integer,,,,,,,,,," @DEFAULT='720'"
invite_at_t2,demo,,text,"Invite_at for T2: @CALCDATE([baseline_timestamp], (([days_to_t2] * 1440) + [survey_min_from_midnight]), 'm')",,,datetime_seconds_ymd,,,,,,,,,," @CALCDATE([baseline_timestamp], (([days_to_t2] * 1440) + [survey_min_from_midnight]), 'm')"
diary_min_from_midnight,demo,,text,"Daily Diary Minutes from Midnight",,"Example: 9AM: 9 * 60 = 540 ",integer,,,,,,,,,," @DEFAULT='540'"
diary_start_at,demo,,text,"Daily diary start at: @CALCDATE([baseline_timestamp], (1440 + [diary_min_from_midnight]), 'm')",,,datetime_seconds_ymd,,,,,,,,,," @CALCDATE([baseline_timestamp], (1440 + [diary_min_from_midnight]), 'm')"
